<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°°í¬ ìƒíƒœ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 { color: #333; }
        .test-item {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #0066cc;
        }
        .success { border-left-color: #28a745; background: #d4edda; }
        .error { border-left-color: #dc3545; background: #f8d7da; }
        button {
            background: #0066cc;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Goldman Sachs GS Note - ë°°í¬ ìƒíƒœ í…ŒìŠ¤íŠ¸</h1>
    
    <div id="results"></div>
    
    <h2>ğŸ“‹ ìˆ˜ë™ í…ŒìŠ¤íŠ¸</h2>
    <button onclick="testManifest()">manifest.plist í…ŒìŠ¤íŠ¸</button>
    <button onclick="testIPA()">IPA íŒŒì¼ í…ŒìŠ¤íŠ¸</button>
    <button onclick="testInstall()">ì„¤ì¹˜ ë§í¬ í…ŒìŠ¤íŠ¸</button>
    
    <h2>ğŸ“± ë””ë°”ì´ìŠ¤ ì •ë³´</h2>
    <div id="deviceInfo" class="test-item"></div>
    
    <script>
        const baseURL = 'https://ohkst.github.io/enterpriseipa';
        const resultsDiv = document.getElementById('results');
        const deviceInfoDiv = document.getElementById('deviceInfo');
        
        // ë””ë°”ì´ìŠ¤ ì •ë³´ í‘œì‹œ
        deviceInfoDiv.innerHTML = `
            <strong>User Agent:</strong><br>
            <code>${navigator.userAgent}</code><br><br>
            <strong>í”Œë«í¼:</strong> ${navigator.platform}<br>
            <strong>ì–¸ì–´:</strong> ${navigator.language}
        `;
        
        // ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        window.addEventListener('DOMContentLoaded', function() {
            runAllTests();
        });
        
        async function runAllTests() {
            addResult('ğŸ”„ ë°°í¬ ìƒíƒœ ìë™ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'test-item');
            
            await testFileAccess('manifest.plist', baseURL + '/manifest.plist');
            await testFileAccess('Goldman_Sachs.ipa', baseURL + '/Goldman_Sachs.ipa');
            await testFileAccess('index.html', baseURL + '/index.html');
            
            addResult('âœ… ëª¨ë“  ìë™ í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'test-item success');
        }
        
        async function testFileAccess(name, url) {
            try {
                const response = await fetch(url, { method: 'HEAD' });
                
                if (response.ok) {
                    const size = response.headers.get('content-length');
                    const type = response.headers.get('content-type');
                    
                    addResult(
                        `âœ… ${name} ì ‘ê·¼ ê°€ëŠ¥<br>` +
                        `&nbsp;&nbsp;&nbsp;í¬ê¸°: ${formatBytes(size)}<br>` +
                        `&nbsp;&nbsp;&nbsp;íƒ€ì…: ${type}<br>` +
                        `&nbsp;&nbsp;&nbsp;URL: ${url}`,
                        'test-item success'
                    );
                } else {
                    addResult(
                        `âŒ ${name} ì ‘ê·¼ ì‹¤íŒ¨<br>` +
                        `&nbsp;&nbsp;&nbsp;ìƒíƒœ: ${response.status}<br>` +
                        `&nbsp;&nbsp;&nbsp;URL: ${url}`,
                        'test-item error'
                    );
                }
            } catch (error) {
                addResult(
                    `âŒ ${name} í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜<br>` +
                    `&nbsp;&nbsp;&nbsp;ì˜¤ë¥˜: ${error.message}<br>` +
                    `&nbsp;&nbsp;&nbsp;URL: ${url}`,
                    'test-item error'
                );
            }
        }
        
        function testManifest() {
            addResult('ğŸ” manifest.plist ìƒì„¸ í…ŒìŠ¤íŠ¸ ì¤‘...', 'test-item');
            
            fetch(baseURL + '/manifest.plist')
                .then(response => response.text())
                .then(text => {
                    addResult(
                        `âœ… manifest.plist ë‚´ìš©:<br><pre>${escapeHtml(text)}</pre>`,
                        'test-item success'
                    );
                })
                .catch(error => {
                    addResult(
                        `âŒ manifest.plist ë¡œë“œ ì‹¤íŒ¨: ${error.message}`,
                        'test-item error'
                    );
                });
        }
        
        function testIPA() {
            addResult('ğŸ” IPA íŒŒì¼ í…ŒìŠ¤íŠ¸ ì¤‘...', 'test-item');
            
            fetch(baseURL + '/Goldman_Sachs.ipa', { method: 'HEAD' })
                .then(response => {
                    const size = response.headers.get('content-length');
                    const type = response.headers.get('content-type');
                    
                    addResult(
                        `âœ… IPA íŒŒì¼ ì ‘ê·¼ ê°€ëŠ¥<br>` +
                        `&nbsp;&nbsp;&nbsp;í¬ê¸°: ${formatBytes(size)}<br>` +
                        `&nbsp;&nbsp;&nbsp;íƒ€ì…: ${type}<br>` +
                        `&nbsp;&nbsp;&nbsp;ìƒíƒœ: ${response.status}`,
                        'test-item success'
                    );
                })
                .catch(error => {
                    addResult(
                        `âŒ IPA íŒŒì¼ ì ‘ê·¼ ì‹¤íŒ¨: ${error.message}`,
                        'test-item error'
                    );
                });
        }
        
        function testInstall() {
            const installURL = `itms-services://?action=download-manifest&url=${baseURL}/manifest.plist`;
            
            addResult(
                `ğŸ“± ì„¤ì¹˜ ë§í¬:<br>` +
                `<code>${installURL}</code><br><br>` +
                `âš ï¸ iOS ê¸°ê¸°ì—ì„œë§Œ ì‘ë™í•©ë‹ˆë‹¤.<br>` +
                `iOS Safariì—ì„œ ì´ í˜ì´ì§€ë¥¼ ì—´ê³  ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.`,
                'test-item'
            );
            
            if (/(iPhone|iPad|iPod)/i.test(navigator.userAgent)) {
                window.location.href = installURL;
            } else {
                alert('ì´ ê¸°ëŠ¥ì€ iOS ê¸°ê¸°ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            }
        }
        
        function addResult(html, className) {
            const div = document.createElement('div');
            div.className = className;
            div.innerHTML = html;
            resultsDiv.appendChild(div);
        }
        
        function formatBytes(bytes) {
            if (!bytes) return 'ì•Œ ìˆ˜ ì—†ìŒ';
            const kb = bytes / 1024;
            const mb = kb / 1024;
            
            if (mb >= 1) {
                return mb.toFixed(2) + ' MB';
            } else if (kb >= 1) {
                return kb.toFixed(2) + ' KB';
            } else {
                return bytes + ' bytes';
            }
        }
        
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }
    </script>
</body>
</html>

